function seriesLoadScripts(t,e){if("object"!=typeof t)var t=[t];var i=document.getElementsByTagName("head").item(0)||document.documentElement,s=new Array,a=t.length-1,n=function(o){s[o]=document.createElement("script"),s[o].setAttribute("type","text/javascript"),s[o].onload=s[o].onreadystatechange=function(){this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),o!=a?n(o+1):"function"==typeof e&&e()},s[o].setAttribute("src",t[o]),i.appendChild(s[o])};n(0)}$(document).ready(function(){seriesLoadScripts("/v2/web/boss/js/plugins/jquery-confirm.js",function(){t.init(),t.jobToggle()});var t={init:function(){t.syncContainer=$("#container"),t.listContainer=t.syncContainer.find(".position-list"),t.timer,t.para={page:0,type:0,status:0},t.isLoading=!1,t.listCon=$(".position-list"),t.listMoreEl=t.syncContainer.find(".loadmore"),t.url=t.listMoreEl.attr("data-url"),t.tipsContainer=t.syncContainer.find(".data-tips"),t.getData(1),$(".position-sec .btn-release").on("click",function(e){var i=$(this);t.checkIdentity(i),e.preventDefault()}),_PAGE.prompt&&($(".pop").text(_PAGE.prompt).show(),setTimeout(function(){$(".pop").css({display:"none"})},3e3)),$(".sel-type").click(function(){$(this).toggleClass("filter-open"),$(".position-sec").toggleClass("show-chat-filter"),$(this).find(".red").length&&($(this).find(".red").removeClass("red").text("筛选"),t.syncContainer.find(".sec-filter a").removeClass("cur"),t.syncContainer.find(".sec-filter dl").each(function(){$(this).find("a").eq(0).addClass("cur")}),setTimeout(function(){t.syncContainer.find(".sel-type .label-text").attr("ka","main_filter")},10),t.para.type=0,t.para.status=0,t.getData(1))}),$(".sec-filter dd a").click(function(){var t=$(".sel-type .label-text b");$(this).siblings().removeClass("cur"),$(this).addClass("cur"),t.text("取消筛选").addClass("red"),t.parent().attr("ka","main_filter_cancel")}),t.listCon.on("click",".link-recommend",function(){window.top.location.href="/chat/im?mu=recommend&jobid="+$(this).attr("data-jobid")}),t.listCon.on("click",".link-communicaion",function(){var t=window.top.Chat.containerChat.find(".sec-top");t.find(".sel-type");window.top.Menu.sideEl.find(".menu-chat a").click(),window.top.Chat.resetRules(null,$(this).attr("data-jobid"),$(this).closest(".position-item").find(".position-tit").text()),window.top.Chat.filterParms={page:0,status:"",origin:"",jobid:$(this).attr("data-jobid"),salary:0,experience:0,degree:0},window.top.Chat.getFilterUsers(window.top.Chat.filterParms,null,!1)}),t.syncContainer.find(".sec-filter a").on("click",function(e){var i=$(this);i.attr("data-type")&&(t.para.type=i.attr("data-type")),i.attr("data-status")&&(t.para.status=i.attr("data-status")),t.getData(!0),e.preventDefault()}),t.listMoreEl.on("click",function(){t.listMoreEl.hasClass("disabled")||t.isLoading||t.getData()});t.listMoreEl.get(0);$(window).on("scroll",function(){t.timer&&clearTimeout(t.timer),t.listMoreEl.hasClass("disabled")||t.isLoading||(t.timer=setTimeout(function(){$(document).scrollTop()>=$(document).height()-$(window).height()&&t.getData()},100))})},getData:function(e){e&&(t.para.page=0,t.listCon.html(""),t.tipsContainer.html('<div class="spinner spinner-circle"><div class="loader"></div><span>正在加载数据...</span></div>').show()),t.para.page++,$.ajax({type:"GET",url:t.url,dataType:"JSON",cache:!1,data:t.para,success:function(i){var i=i,s=t.listCon.html();1==i.rescode?""==i.html?(t.listMoreEl.addClass("disabled").text("没有更多了"),e&&(t.tipsContainer.html('<div class="data-blank"><i class="tip-errordata"></i><b>没有相关数据</b></div>').show(),t.listMoreEl.hide())):(s+=i.html,t.listCon.html(s),t.tipsContainer.html("").hide(),i.hasMore?t.listMoreEl.removeClass("disabled").text("加载更多").show():t.listMoreEl.addClass("disabled").text("没有更多了"),e&&t.listContainer.find("li").length<10&&t.listMoreEl.hide()):(t.listMoreEl.removeClass("disabled").text("数据加载出错"),e&&t.tipsContainer.html('<div class="data-blank"><i class="tip-errordata"></i><b>数据加载出错</b></div>').show()),t.isLoading=!1},error:function(i){t.listMoreEl.removeClass("disabled").text("数据加载出错"),t.isLoading=!1,e&&t.tipsContainer.html('<div class="data-blank"><i class="tip-errordata"></i><b>数据加载出错</b></div>').show()}})},jobToggle:function(){$("#container").delegate(".position-close","click",function(){if(!$(this).hasClass("disabled")){$(this).addClass("disabled");var t;$(this).attr("data-jobid"),offurl=$(this).attr("data-offurl"),onurl=$(this).attr("data-onurl");var t,e=$(this);"关闭职位"==$(this).text()?t=offurl:"打开职位"==$(this).text()&&(t=onurl),$.ajax({type:"GET",url:t,dataType:"JSON",cache:!1,success:function(i){1==i.rescode?t!=onurl?(e.addClass("hight-light").html('<i class="fz-stop"></i>打开职位'),e.parents(".position-item").find(".position-tit").append('<span class="stoped">已关闭</span>'),$(".pop").text("关闭成功").show(),setTimeout(function(){$(".pop").css({display:"none"})},1500)):(e.removeClass("hight-light").html('<i class="fz-stop"></i>关闭职位'),$(".pop").text("打开成功").show(),e.parents(".position-item").find(".stoped").remove(),setTimeout(function(){$(".pop").css({display:"none"})},1500)):($(".pop").text(i.resmsg).show(),setTimeout(function(){$(".pop").css({display:"none"})},3e3)),e.removeClass("disabled")},error:function(){e.removeClass("disabled")}})}})},Tips:function(){var t,e;switch(_PAGE.prompt){case 1:t='<p class="tip-con">请耐心等待审核<br>审核通过后方可进行此操作</p> ',e="关闭";break;case 2:t='<p class="tip-con">需要认证身份才能发布更多职位</p><p class="hint">请打开“BOSS直聘”，点击“我的”，选择<br>“认证BOSS身份”，提交认证',e="知道了";break;case 3:_PAGE.company,t='<p class="tip-con">需要完善公司主页后才能发布更多职位</p><p class="hint">请打开“BOSS直聘”，点击“我的”，选择<br>“'+com+"”",e="知道了"}$.alert({content:t,title:'<span class="text-blue" style="font-size:14px">温馨提示</span>',confirmButton:e,cancelButton:!1,closeIcon:!0,columnClass:"layer"})},checkIdentity:function(t){$.ajax({url:"/bossweb/checkCert.json",data:null,type:"post",dataType:"JSON",timeout:5e3,success:function(e){var i=e.jobStatus;if(0==i)return void(window.location.href=t.attr("href"));var s="",a="";switch(i){case 1:s='<div class="tip-con"><h4>请耐心等待审核，审核通过后方可进行此操作</h4></div>',a="关闭";break;case 2:s='<div class="tip-con"><h4>需要认证身份才能发布更多职位</h4><p>审核通过后方可进行此操作请打开“BOSS直聘”，点击“我的”，选择“认证BOSS身份”，提交认证。</p></div>',a="知道了";break;case 3:s='<div class="tip-con"><h4>需要完善公司主页后才能发布更多职位</h4><p>请打开“BOSS直聘”，点击“我的”，选择“装修boss直聘主页”</p></div>',a="知道了";break;case 4:s='<div class="tip-con"><h4>需要装修公司主页才能发布更多职位</h4><p>请到【我的公司】-【公司主页】中完善您的公司信息</p></div>',a="去完善";break;case 5:s='<div class="tip-con"><p>您已经到达每日发布职位的上限，明天再来发布吧~</p></div>',a="关闭"}$.confirm({content:s,title:"温馨提示",confirmButton:a,cancelButton:4==i&&"我再想想",buttonsReverse:4==i,closeIcon:!0,columnClass:"pop-tip",confirm:function(){4==i&&(window.location.href="/user/company/info/")}})},error:function(t){}})}}});